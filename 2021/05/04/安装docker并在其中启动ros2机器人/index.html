<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          安装docker并在其中启动ros2机器人 - null
        
    </title>

    <link rel="canonical" href="https://figoowen2003.github.io/2021/05/04/安装docker并在其中启动ros2机器人/">

    <!-- Bootstrap Core CSS -->

   
<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.4.1/css/bootstrap.min.css">


    

    <!-- Custom CSS --> 
    
<link rel="stylesheet" href="/css/beantech.min.css">


    
<link rel="stylesheet" href="/css/donate.css">

	
<link rel="stylesheet" href="/css/w3.css">

    <!-- Pygments Highlight CSS -->
    
<link rel="stylesheet" href="/css/highlight.css">


    
<link rel="stylesheet" href="/css/widget.css">


    
<link rel="stylesheet" href="/css/rocket.css">


    
<link rel="stylesheet" href="/css/signature.css">


    
<link rel="stylesheet" href="/css/toc.css">


    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
	

    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
    }
   .post-heading{
    padding:20px;
    }
  .person {
    border: 10px solid transparent;
    margin-bottom: 25px;
    width: 80%;
    height: 80%;
    opacity: 0.7;
  }
  .person:hover {
    border-color: #f1f1f1;
  }
 
    .carousel-inner img {
      width: 100%; /* Set width to 100% */
      margin: auto;
    }

    .carousel-caption h3 {
      color: #fff !important;
    }

</style>

<header id="headerid" class="w3-indigo intro-header" style="position:relative;">
    <!-- Signature -->
	
        <div class="container">
            <div class=" row" >
			
			<canvas id="particles-js-canvas" style="position:absolute;z-index:1;top:0px;left:0px;" width="100%" height="50%"></canvas>
			
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1" style="z-index:2;">
                
                    <div class="post-heading" style="padding:40px">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#ROS2, Docker, ubuntu，Gazebo" title="ROS2, Docker, ubuntu，Gazebo">ROS2, Docker, ubuntu，Gazebo</a>
                            
                        </div>
                        <h1>安装docker并在其中启动ros2机器人</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by Mu Wenfeng on
                            2021-05-04
                        </span>
                    </div>
                
                </div>
            </div>
        </div>
  
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Hexo of Muwenfeng</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a  href="/">Homepage</a>
                    </li>
		    
                    

                        
                        <li>
           
                            <a  href="#">menu1</a>
                           
                        </li>
                        
                    

                        
                        <li>
           
                            <a  href="#">menu2</a>
                           
                        </li>
                        
                    

                        
                        <li>
           
                            <a  href="#">menu3</a>
                           
                        </li>
                        
                    

                        
                        <li>
           
                            <a  href="#">menu3</a>
                           
                        </li>
                        
                    

                        
                        <li>
           
                            <a  href="#">menu5</a>
                           
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h1 id="Docker简介"><a href="#Docker简介" class="headerlink" title="Docker简介"></a>Docker简介</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><ul>
<li>Docker是一种容器，它被视为存在与一台电脑中的电脑。</li>
<li>Docker是一种服务，它提供了可被移植的独立容器集合，这些容器会与预先安装的软件包绑定在一起。</li>
</ul>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ol>
<li><p>下载合适的Docker：<a target="_blank" rel="noopener" href="https://docs.docker.com/get-docker/">https://docs.docker.com/get-docker/</a></p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/image-20210504183039759.png" alt="image-20210504183039759"></p>
</li>
<li><p>安装Docker</p>
<p>当前使用的是Ubuntu 20.04，请按照以下步骤进行安装：<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/ubuntu/">https://docs.docker.com/engine/install/ubuntu/</a></p>
<h1 id="Install-Docker-Engine-on-Ubuntu"><a href="#Install-Docker-Engine-on-Ubuntu" class="headerlink" title="Install Docker Engine on Ubuntu"></a>Install Docker Engine on Ubuntu</h1><p><em>Estimated reading time: 10 minutes</em></p>
<p>To get started with Docker Engine on Ubuntu, make sure you <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/ubuntu/#prerequisites">meet the prerequisites</a>, then <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/ubuntu/#installation-methods">install Docker</a>.</p>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><h3 id="OS-requirements"><a href="#OS-requirements" class="headerlink" title="OS requirements"></a>OS requirements</h3><p>To install Docker Engine, you need the 64-bit version of one of these Ubuntu versions:</p>
<ul>
<li>Ubuntu Hirsute 21.04</li>
<li>Ubuntu Groovy 20.10</li>
<li>Ubuntu Focal 20.04 (LTS)</li>
<li>Ubuntu Bionic 18.04 (LTS)</li>
<li>Ubuntu Xenial 16.04 (LTS)</li>
</ul>
<p>Docker Engine is supported on <code>x86_64</code> (or <code>amd64</code>), <code>armhf</code>, and <code>arm64</code> architectures.</p>
<h3 id="Uninstall-old-versions"><a href="#Uninstall-old-versions" class="headerlink" title="Uninstall old versions"></a>Uninstall old versions</h3><p>Older versions of Docker were called <code>docker</code>, <code>docker.io</code>, or <code>docker-engine</code>. If these are installed, uninstall them:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get remove docker docker-engine docker.io containerd runc</span><br></pre></td></tr></table></figure>

<p>It’s OK if <code>apt-get</code> reports that none of these packages are installed.</p>
<p>The contents of <code>/var/lib/docker/</code>, including images, containers, volumes, and networks, are preserved. If you do not need to save your existing data, and want to start with a clean installation, refer to the <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/ubuntu/#uninstall-docker-engine">uninstall Docker Engine</a> section at the bottom of this page.</p>
<h3 id="Supported-storage-drivers"><a href="#Supported-storage-drivers" class="headerlink" title="Supported storage drivers"></a>Supported storage drivers</h3><p>Docker Engine on Ubuntu supports <code>overlay2</code>, <code>aufs</code> and <code>btrfs</code> storage drivers.</p>
<p>Docker Engine uses the <code>overlay2</code> storage driver by default. If you need to use <code>aufs</code> instead, you need to configure it manually. See <a target="_blank" rel="noopener" href="https://docs.docker.com/storage/storagedriver/aufs-driver/">use the AUFS storage driver</a></p>
<h2 id="Installation-methods"><a href="#Installation-methods" class="headerlink" title="Installation methods"></a>Installation methods</h2><p>You can install Docker Engine in different ways, depending on your needs:</p>
<ul>
<li>Most users <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository">set up Docker’s repositories</a> and install from them, for ease of installation and upgrade tasks. This is the recommended approach.</li>
<li>Some users download the DEB package and <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/ubuntu/#install-from-a-package">install it manually</a> and manage upgrades completely manually. This is useful in situations such as installing Docker on air-gapped systems with no access to the internet.</li>
<li>In testing and development environments, some users choose to use automated <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/ubuntu/#install-using-the-convenience-script">convenience scripts</a> to install Docker.</li>
</ul>
<h3 id="Install-using-the-repository"><a href="#Install-using-the-repository" class="headerlink" title="Install using the repository"></a>Install using the repository</h3><p>Before you install Docker Engine for the first time on a new host machine, you need to set up the Docker repository. Afterward, you can install and update Docker from the repository.</p>
<h4 id="Set-up-the-repository"><a href="#Set-up-the-repository" class="headerlink" title="Set up the repository"></a>Set up the repository</h4><ol>
<li><p>Update the <code>apt</code> package index and install packages to allow <code>apt</code> to use a repository over HTTPS:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line"></span><br><span class="line">$ sudo apt-get install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    gnupg \</span><br><span class="line">    lsb-release</span><br></pre></td></tr></table></figure></li>
<li><p>Add Docker’s official GPG key:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -fsSL https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu&#x2F;gpg | sudo gpg --dearmor -o &#x2F;usr&#x2F;share&#x2F;keyrings&#x2F;docker-archive-keyring.gpg</span><br></pre></td></tr></table></figure></li>
<li><p>Use the following command to set up the <strong>stable</strong> repository. To add the <strong>nightly</strong> or <strong>test</strong> repository, add the word <code>nightly</code> or <code>test</code> (or both) after the word <code>stable</code> in the commands below. <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/">Learn about <strong>nightly</strong> and <strong>test</strong> channels</a>.</p>
<blockquote>
<p><strong>Note</strong>: The <code>lsb_release -cs</code> sub-command below returns the name of your Ubuntu distribution, such as <code>xenial</code>. Sometimes, in a distribution like Linux Mint, you might need to change <code>$(lsb_release -cs)</code> to your parent Ubuntu distribution. For example, if you are using <code>Linux Mint Tessa</code>, you could use <code>bionic</code>. Docker does not offer any guarantees on untested and unsupported Ubuntu distributions.</p>
</blockquote>
<ul>
<li>x86_64 / amd64</li>
<li>armhf</li>
<li>arm64</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ echo \</span><br><span class="line">  &quot;deb [arch&#x3D;amd64 signed-by&#x3D;&#x2F;usr&#x2F;share&#x2F;keyrings&#x2F;docker-archive-keyring.gpg] https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu \</span><br><span class="line">  $(lsb_release -cs) stable&quot; | sudo tee &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;docker.list &gt; &#x2F;dev&#x2F;null</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="Install-Docker-Engine"><a href="#Install-Docker-Engine" class="headerlink" title="Install Docker Engine"></a>Install Docker Engine</h4><ol>
<li><p>Update the <code>apt</code> package index, and install the <em>latest version</em> of Docker Engine and containerd, or go to the next step to install a specific version:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Got multiple Docker repositories?</p>
<p>If you have multiple Docker repositories enabled, installing or updating without specifying a version in the <code>apt-get install</code> or <code>apt-get update</code> command always installs the highest possible version, which may not be appropriate for your stability needs.</p>
</blockquote>
</li>
<li><p>To install a <em>specific version</em> of Docker Engine, list the available versions in the repo, then select and install:</p>
<p>a. List the versions available in your repo:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ apt-cache madison docker-ce</span><br><span class="line"></span><br><span class="line">  docker-ce | 5:18.09.1~3-0~ubuntu-xenial | https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu  xenial&#x2F;stable amd64 Packages</span><br><span class="line">  docker-ce | 5:18.09.0~3-0~ubuntu-xenial | https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu  xenial&#x2F;stable amd64 Packages</span><br><span class="line">  docker-ce | 18.06.1~ce~3-0~ubuntu       | https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu  xenial&#x2F;stable amd64 Packages</span><br><span class="line">  docker-ce | 18.06.0~ce~3-0~ubuntu       | https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu  xenial&#x2F;stable amd64 Packages</span><br></pre></td></tr></table></figure>

<p>b. Install a specific version using the version string from the second column, for example, <code>5:18.09.1~3-0~ubuntu-xenial</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install docker-ce&#x3D;&lt;VERSION_STRING&gt; docker-ce-cli&#x3D;&lt;VERSION_STRING&gt; containerd.io</span><br></pre></td></tr></table></figure></li>
<li><p>Verify that Docker Engine is installed correctly by running the <code>hello-world</code> image.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run hello-world</span><br></pre></td></tr></table></figure>

<p>This command downloads a test image and runs it in a container. When the container runs, it prints an informational message and exits.</p>
</li>
</ol>
<p>Docker Engine is installed and running. The <code>docker</code> group is created but no users are added to it. You need to use <code>sudo</code> to run Docker commands. Continue to <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/linux-postinstall/">Linux postinstall</a> to allow non-privileged users to run Docker commands and for other optional configuration steps.</p>
<h4 id="Upgrade-Docker-Engine"><a href="#Upgrade-Docker-Engine" class="headerlink" title="Upgrade Docker Engine"></a>Upgrade Docker Engine</h4><p>To upgrade Docker Engine, first run <code>sudo apt-get update</code>, then follow the <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository">installation instructions</a>, choosing the new version you want to install.</p>
<h3 id="Install-from-a-package"><a href="#Install-from-a-package" class="headerlink" title="Install from a package"></a>Install from a package</h3><p>If you cannot use Docker’s repository to install Docker Engine, you can download the <code>.deb</code> file for your release and install it manually. You need to download a new file each time you want to upgrade Docker.</p>
<ol>
<li><p>Go to <a target="_blank" rel="noopener" href="https://download.docker.com/linux/ubuntu/dists/"><code>https://download.docker.com/linux/ubuntu/dists/</code></a>, choose your Ubuntu version, then browse to <code>pool/stable/</code>, choose <code>amd64</code>, <code>armhf</code>, or <code>arm64</code>, and download the <code>.deb</code> file for the Docker Engine version you want to install.</p>
<blockquote>
<p><strong>Note</strong>: To install a <strong>nightly</strong> or <strong>test</strong> (pre-release) package, change the word <code>stable</code> in the above URL to <code>nightly</code> or <code>test</code>. <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/">Learn about <strong>nightly</strong> and <strong>test</strong> channels</a>.</p>
</blockquote>
</li>
<li><p>Install Docker Engine, changing the path below to the path where you downloaded the Docker package.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dpkg -i &#x2F;path&#x2F;to&#x2F;package.deb</span><br></pre></td></tr></table></figure>

<p>The Docker daemon starts automatically.</p>
</li>
<li><p>Verify that Docker Engine is installed correctly by running the <code>hello-world</code> image.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run hello-world</span><br></pre></td></tr></table></figure>

<p>This command downloads a test image and runs it in a container. When the container runs, it prints an informational message and exits.</p>
</li>
</ol>
<p>Docker Engine is installed and running. The <code>docker</code> group is created but no users are added to it. You need to use <code>sudo</code> to run Docker commands. Continue to <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/linux-postinstall/">Post-installation steps for Linux</a> to allow non-privileged users to run Docker commands and for other optional configuration steps.</p>
<h4 id="Upgrade-Docker-Engine-1"><a href="#Upgrade-Docker-Engine-1" class="headerlink" title="Upgrade Docker Engine"></a>Upgrade Docker Engine</h4><p>To upgrade Docker Engine, download the newer package file and repeat the <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/ubuntu/#install-from-a-package">installation procedure</a>, pointing to the new file.</p>
<h3 id="Install-using-the-convenience-script"><a href="#Install-using-the-convenience-script" class="headerlink" title="Install using the convenience script"></a>Install using the convenience script</h3><p>Docker provides convenience scripts at <a target="_blank" rel="noopener" href="https://get.docker.com/">get.docker.com</a> and <a target="_blank" rel="noopener" href="https://test.docker.com/">test.docker.com</a> for installing edge and testing versions of Docker Engine - Community into development environments quickly and non-interactively. The source code for the scripts is in the <a target="_blank" rel="noopener" href="https://github.com/docker/docker-install"><code>docker-install</code> repository</a>. <strong>Using these scripts is not recommended for production environments</strong>, and you should understand the potential risks before you use them:</p>
<ul>
<li>The scripts require <code>root</code> or <code>sudo</code> privileges to run. Therefore, you should carefully examine and audit the scripts before running them.</li>
<li>The scripts attempt to detect your Linux distribution and version and configure your package management system for you. In addition, the scripts do not allow you to customize any installation parameters. This may lead to an unsupported configuration, either from Docker’s point of view or from your own organization’s guidelines and standards.</li>
<li>The scripts install all dependencies and recommendations of the package manager without asking for confirmation. This may install a large number of packages, depending on the current configuration of your host machine.</li>
<li>The script does not provide options to specify which version of Docker to install, and installs the latest version that is released in the “edge” channel.</li>
<li>Do not use the convenience script if Docker has already been installed on the host machine using another mechanism.</li>
</ul>
<p>This example uses the script at <a target="_blank" rel="noopener" href="https://get.docker.com/">get.docker.com</a> to install the latest release of Docker Engine - Community on Linux. To install the latest testing version, use <a target="_blank" rel="noopener" href="https://test.docker.com/">test.docker.com</a> instead. In each of the commands below, replace each occurrence of <code>get</code> with <code>test</code>.</p>
<blockquote>
<p><strong>Warning</strong>:</p>
<p>Always examine scripts downloaded from the internet before running them locally.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ curl -fsSL https:&#x2F;&#x2F;get.docker.com -o get-docker.sh</span><br><span class="line">$ sudo sh get-docker.sh</span><br><span class="line">&lt;...&gt;</span><br></pre></td></tr></table></figure>

<p>If you would like to use Docker as a non-root user please see the <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/linux-postinstall#manage-docker-as-a-non-root-user">post-installation steps for Linux</a>.</p>
<p>Docker Engine - Community is installed. It starts automatically on <code>DEB</code>-based distributions. On <code>RPM</code>-based distributions, you need to start it manually using the appropriate <code>systemctl</code> or <code>service</code> command. As the message indicates, non-root users can’t run Docker commands by default.</p>
<h4 id="Upgrade-Docker-after-using-the-convenience-script"><a href="#Upgrade-Docker-after-using-the-convenience-script" class="headerlink" title="Upgrade Docker after using the convenience script"></a>Upgrade Docker after using the convenience script</h4><p>If you installed Docker using the convenience script, you should upgrade Docker using your package manager directly. There is no advantage to re-running the convenience script, and it can cause issues if it attempts to re-add repositories which have already been added to the host machine.</p>
<h2 id="Uninstall-Docker-Engine"><a href="#Uninstall-Docker-Engine" class="headerlink" title="Uninstall Docker Engine"></a>Uninstall Docker Engine</h2><ol>
<li><p>Uninstall the Docker Engine, CLI, and Containerd packages:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get purge docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure></li>
<li><p>Images, containers, volumes, or customized configuration files on your host are not automatically removed. To delete all images, containers, and volumes:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo rm -rf &#x2F;var&#x2F;lib&#x2F;docker</span><br><span class="line">$ sudo rm -rf &#x2F;var&#x2F;lib&#x2F;containerd</span><br></pre></td></tr></table></figure></li>
</ol>
<p>You must delete any edited configuration files manually.</p>
</li>
</ol>
<h1 id="在Docker中运行ROS2和Gazebo"><a href="#在Docker中运行ROS2和Gazebo" class="headerlink" title="在Docker中运行ROS2和Gazebo"></a>在Docker中运行ROS2和Gazebo</h1><h2 id="可视化Docker容器"><a href="#可视化Docker容器" class="headerlink" title="可视化Docker容器"></a>可视化Docker容器</h2><ul>
<li><p>新开一个terminal，创建一个文件夹</p>
<p><code>mkdir new_foldre</code></p>
</li>
<li><p>下载docker容器镜像</p>
<p><code>sudo docker pull tiryoh/ros2-desktop-vnc:foxy</code></p>
</li>
<li><p>运行该容器</p>
<p><code>sudo docker run -it -p 6080:80 -e RESOLUTION=1920*1080 -v /new_folder --name ros2_new_folder mwf/ros2-gazebo-turtlebot3-desktop-vnc:foxy</code></p>
<p>ros2_new_folder是容器名，我们将新建的new_folder绑定到容器上（暂时没明白）</p>
</li>
<li><p>在浏览器中输入： <a target="_blank" rel="noopener" href="http://127.0.0.1:6080/%EF%BC%8C%E6%98%BE%E7%A4%BA%E5%A6%82%E4%B8%8B">http://127.0.0.1:6080/，显示如下</a></p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/1-screen-you-should-seeJPG.jpg" alt="1-screen-you-should-seeJPG"></p>
<p>在这个过程中，开始一直出现无法ping通127.0.0.1：6080的现象，因此也无法在浏览器页面可视化该docker容器。经过一番折腾，发现是因为启动了代理的原因，关闭代理，重启系统，就可以了。</p>
</li>
</ul>
<h2 id="在docker中安装TurtleBot3"><a href="#在docker中安装TurtleBot3" class="headerlink" title="在docker中安装TurtleBot3"></a>在docker中安装TurtleBot3</h2><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><ul>
<li><p>新开一个terminal，输入以下指令（此时上文的容器尚处在运行状态）</p>
<p><code>sudo docker ps -l</code></p>
<p>查看运行容器的id号</p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/image-20210510112319006.png" alt="image-20210510112319006"></p>
</li>
<li><p>输入以下指令，进入容器</p>
<p><code>sudo docker exec -it bea80322e123 /bin/bash</code></p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/image-20210510114907656.png" alt="image-20210510114907656"></p>
<p>表示已经成功</p>
</li>
<li><p>按以下步骤安装TurtulBot3的源码包</p>
<p><code>mkdir -p ~/turtlebot3_ws/src</code></p>
<p><code>cd ~/turtlebot3_ws</code></p>
<p><code>wget https://raw.githubusercontent.com/ROBOTIS-GIT/turtlebot3/ros2/turtlebot3.repos</code></p>
<p>wget这一步尽量在代理下完成，国内的话会下载失败</p>
<p><code>vcs import src &lt; turtlebot3.repos</code></p>
<p>切换到foxy-devel分支，如果按照默认的最新分支，会出现编译失败的问题（【1】）</p>
<p><code>vcs custom --args checkout foxy-devel</code></p>
</li>
<li><p>编译</p>
<p><code>colcon build --symlink-install</code></p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/image-20210510145911775.png" alt="image-20210510145911775"></p>
</li>
<li><p>设置环境变量</p>
<p><code>echo &#39;source ~/turtlebot3_ws/install/setup.bash&#39; &gt;&gt; ~/.bashrc</code></p>
<p><code>echo &#39;export GAZEBO_MODEL_PATH=$GAZEBO_MODEL_PATH:~/turtlebot3_ws/src/turtlebot3/turtlebot3_simulations/turtlebot3_gazebo/models&#39; &gt;&gt; ~/.bashrc</code></p>
<p><code>echo &#39;export TURTLEBOT3_MODEL=waffle_pi&#39; &gt;&gt; ~/.bashrc</code></p>
<p><code>source ~/.bashrc</code></p>
</li>
</ul>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><ul>
<li><p>新开命令行窗口，输入</p>
<p><code>sudo docker run -it -p 6080:80 -e RESOLUTION=1920*1080 -v /new_folder --name ros2_new_folder mwf/ros2-gazebo-turtlebot3-desktop-vnc:foxy</code></p>
</li>
<li><p>浏览器中（一步是chrome）打开 <a target="_blank" rel="noopener" href="http://127.0.0.1:6080/">http://127.0.0.1:6080/</a></p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/1-screen-you-should-seeJPG.jpg" alt="1-screen-you-should-seeJPG"></p>
</li>
<li><p>在可视化窗口中，点击左下角的菜单System Tools-&gt;LXTerminal</p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/image-20210510152710613.png" alt="image-20210510152710613"></p>
</li>
<li><p>在LXTerminal中输入以下命令</p>
<ul>
<li><p>下载</p>
<p><code>mkdir -p ~/turtlebot3_ws/src</code></p>
<p><code>cd ~/turtlebot3_ws</code></p>
<p><code>wget https://raw.githubusercontent.com/ROBOTIS-GIT/turtlebot3/ros2/turtlebot3.repos</code></p>
<p>wget这一步尽量在代理下完成，国内的话会下载失败</p>
<p><code>vcs import src &lt; turtlebot3.repos</code></p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/2-wait-a-whileJPG.jpg" alt="2-wait-a-whileJPG"></p>
<p>切换到foxy-devel分支，如果按照默认的最新分支，会出现编译失败的问题（见【1】）</p>
<p><code>vcs custom --args checkout foxy-devel</code></p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/image-20210510164728661.png" alt="image-20210510164728661"></p>
</li>
<li><p>编译</p>
<p><code>colcon build --symlink-install</code></p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/3-source-code-compileJPG.jpg" alt="3-source-code-compileJPG"></p>
</li>
<li><p>设置环境变量</p>
<p><code>echo &#39;source ~/turtlebot3_ws/install/setup.bash&#39; &gt;&gt; ~/.bashrc</code></p>
<p><code>echo &#39;export GAZEBO_MODEL_PATH=$GAZEBO_MODEL_PATH:~/turtlebot3_ws/src/turtlebot3/turtlebot3_simulations/turtlebot3_gazebo/models&#39; &gt;&gt; ~/.bashrc</code></p>
<p><code>echo &#39;export TURTLEBOT3_MODEL=waffle_pi&#39; &gt;&gt; ~/.bashrc</code></p>
<p><code>source ~/.bashrc</code></p>
</li>
</ul>
</li>
</ul>
<h2 id="启动一个Empty-World"><a href="#启动一个Empty-World" class="headerlink" title="启动一个Empty World"></a>启动一个Empty World</h2><ul>
<li><p>在浏览器的可视化界面中新开一个LXTerminal，输入</p>
<p><code>ros2 launch turtlebot3_gazebo empty_world.launch.py</code></p>
<p>等待一会（也可能几分钟），便可见如下的界面</p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/image-20210510171359152.png" alt="image-20210510171359152"></p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/image-20210510171240902.png" alt="image-20210510171240902"></p>
</li>
</ul>
<h1 id="附"><a href="#附" class="headerlink" title="附"></a>附</h1><p>【1】下载的turtlebot3源码，如果不切换到foxy-devel分支，编译时会一直报如下错误</p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/image-20210510172845617.png" alt="image-20210510172845617"></p>
<p>原因参考<a target="_blank" rel="noopener" href="https://github.com/ROBOTIS-GIT/hls_lfcd_lds_driver/issues/65">https://github.com/ROBOTIS-GIT/hls_lfcd_lds_driver/issues/65</a></p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/image-20210510172939511.png" alt="image-20210510172939511"></p>
<p>意思是最新的代码使用的是upcoming ROS2 version(即将发布的版本)的语法，在foxy的编译系统中，无法编译通过，需要将代码切换到与foxy-devel分支相对应的分支，才能在foxy的编译系统中通过</p>
<p>具体的语法参考下文</p>
<p><img src="/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/image-20210510173255401.png" alt="image-20210510173255401"></p>
<p>获取更多细节，参考<a target="_blank" rel="noopener" href="https://github.com/ros2/rclcpp/blob/master/rclcpp/doc/notes_on_statically_typed_parameters.md">https://github.com/ros2/rclcpp/blob/master/rclcpp/doc/notes_on_statically_typed_parameters.md</a></p>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2021/05/12/基于带nvc的Ubuntu20-04配置ros2和Gazebo/" data-toggle="tooltip" data-placement="top" title="基于带nvc的Ubuntu20.04配置ros2和Gazebo">&larr; Previous post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2021/04/27/使用ROS2在gazebo中孵化和控制机器人-CPlusPlus版/" data-toggle="tooltip" data-placement="top" title="使用ROS2在gazebo中孵化和控制机器人(C++版)">Next post &rarr;</a>
                        </li>
                    
                </ul>

                <br>

                <!--打赏-->
                
                <!--打赏-->

                <br>
                <!--分享-->
                
                    <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                    <!--  css & js -->
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!--分享-->
                <br>                       
                
                <!-- require APlayer -->
                

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->

                
				
            </div>

            <!-- Tabe of Content -->
            <!-- Table of Contents -->

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">Tags</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#ROS2, Docker, ubuntu，Gazebo" title="ROS2, Docker, ubuntu，Gazebo">ROS2, Docker, ubuntu，Gazebo</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="http://www.github.com" target="_blank">github</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>






<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/kinggozhang">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Mu Wenfeng 2021 
                    <br>
                    Powered by <a target="_blank" rel="noopener" href="http://www.hexo.io">Hexo</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    Theme by <a target="_blank" rel="noopener" href="https://github.com/kinggozhang/hexo-theme-ace">ACE</a> 
					
					
					<i class="fa fa-eye" id="leancounter"></i>
					
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->

   
<script src="https://cdn.staticfile.org/jquery/2.2.4/jquery.min.js"></script>




<!-- Bootstrap Core JavaScript -->

   
<script src="https://cdn.staticfile.org/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>



<!-- Custom Theme JavaScript -->

<script src="/js/hux-blog.min.js"></script>



	
<script src="/js/particles.js"></script>

	
<script src="/js/particles_config.js"></script>




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://figoowen2003.github.io/2021/05/04/%E5%AE%89%E8%A3%85docker%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%90%AF%E5%8A%A8ros2%E6%9C%BA%E5%99%A8%E4%BA%BA/index.html/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->




<!-- Baidu Tongji -->






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="https://figoowen2003.github.io/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
